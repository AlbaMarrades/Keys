import { ChangeDetectorRef, Component, NgZone, SimpleChange, ApplicationInitStatus, } from '@angular/core';
import { TestBed, tick } from '@angular/core/testing';
import { By } from '@angular/platform-browser';
import { BrowserAnimationsModule, NoopAnimationsModule } from '@angular/platform-browser/animations';
import { Router } from '@angular/router';
import { RouterTestingModule } from '@angular/router/testing';
import { getQueriesForElement as dtlGetQueriesForElement, prettyDOM as dtlPrettyDOM, waitFor as dtlWaitFor, waitForElementToBeRemoved as dtlWaitForElementToBeRemoved, screen as dtlScreen, within as dtlWithin, configure as dtlConfigure, } from '@testing-library/dom';
import { getConfig } from './config';
import * as i0 from "@angular/core";
const mountedFixtures = new Set();
const inject = TestBed.inject || TestBed.get;
export async function render(sut, renderOptions = {}) {
    const { dom: domConfig, ...globalConfig } = getConfig();
    const { detectChanges: detectChangesOnRender = true, declarations = [], imports = [], providers = [], schemas = [], queries, template = undefined, wrapper = WrapperComponent, componentProperties = {}, componentProviders = [], excludeComponentDeclaration = false, routes, removeAngularAttributes = false, defaultImports = [], } = { ...globalConfig, ...renderOptions };
    dtlConfigure({
        eventWrapper: (cb) => {
            const result = cb();
            detectChangesForMountedFixtures();
            return result;
        },
        ...domConfig,
    });
    TestBed.configureTestingModule({
        declarations: addAutoDeclarations(sut, {
            declarations,
            excludeComponentDeclaration,
            wrapper,
        }),
        imports: addAutoImports({
            imports: imports.concat(defaultImports),
            routes,
        }),
        providers: [...providers],
        schemas: [...schemas],
    });
    await TestBed.compileComponents();
    componentProviders
        .reduce((acc, provider) => acc.concat(provider), [])
        .forEach((p) => {
        const { provide, ...provider } = p;
        TestBed.overrideProvider(provide, provider);
    });
    const componentContainer = createComponentFixture(sut, { wrapper });
    let fixture;
    let detectChanges;
    await renderFixture(componentProperties);
    const rerender = async (rerenderedProperties) => {
        await renderFixture(rerenderedProperties);
    };
    const change = (changedProperties) => {
        const changes = getChangesObj(fixture.componentInstance, changedProperties);
        setComponentProperties(fixture, { componentProperties: changedProperties });
        if (hasOnChangesHook(fixture.componentInstance)) {
            fixture.componentInstance.ngOnChanges(changes);
        }
        fixture.componentRef.injector.get(ChangeDetectorRef).detectChanges();
    };
    let router = routes ? inject(Router) : null;
    const zone = inject(NgZone);
    const navigate = async (elementOrPath, basePath = '') => {
        if (!router) {
            router = inject(Router);
        }
        const href = typeof elementOrPath === 'string' ? elementOrPath : elementOrPath.getAttribute('href');
        const [path, params] = (basePath + href).split('?');
        const queryParams = params
            ? params.split('&').reduce((qp, q) => {
                const [key, value] = q.split('=');
                const currentValue = qp[key];
                if (typeof currentValue === 'undefined') {
                    qp[key] = value;
                }
                else if (Array.isArray(currentValue)) {
                    qp[key] = [...currentValue, value];
                }
                else {
                    qp[key] = [currentValue, value];
                }
                return qp;
            }, {})
            : undefined;
        const navigateOptions = queryParams
            ? {
                queryParams,
            }
            : undefined;
        const doNavigate = () => (navigateOptions ? router.navigate([path], navigateOptions) : router.navigate([path]));
        let result;
        if (zone) {
            await zone.run(() => (result = doNavigate()));
        }
        else {
            result = doNavigate();
        }
        detectChanges();
        return result;
    };
    return {
        fixture,
        detectChanges: () => detectChanges(),
        navigate,
        rerender,
        change,
        debugElement: typeof sut === 'string' ? fixture.debugElement : fixture.debugElement.query(By.directive(sut)),
        container: fixture.nativeElement,
        debug: (element = fixture.nativeElement, maxLength, options) => Array.isArray(element)
            ? element.forEach((e) => console.log(dtlPrettyDOM(e, maxLength, options)))
            : console.log(dtlPrettyDOM(element, maxLength, options)),
        ...replaceFindWithFindAndDetectChanges(dtlGetQueriesForElement(fixture.nativeElement, queries)),
    };
    async function renderFixture(properties) {
        if (fixture) {
            cleanupAtFixture(fixture);
        }
        fixture = await createComponent(componentContainer);
        setComponentProperties(fixture, { componentProperties: properties });
        if (removeAngularAttributes) {
            fixture.nativeElement.removeAttribute('ng-version');
            const idAttribute = fixture.nativeElement.getAttribute('id');
            if (idAttribute && idAttribute.startsWith('root')) {
                fixture.nativeElement.removeAttribute('id');
            }
        }
        mountedFixtures.add(fixture);
        let isAlive = true;
        fixture.componentRef.onDestroy(() => (isAlive = false));
        if (hasOnChangesHook(fixture.componentInstance)) {
            const changes = getChangesObj(null, componentProperties);
            fixture.componentInstance.ngOnChanges(changes);
        }
        detectChanges = () => {
            if (isAlive) {
                fixture.detectChanges();
            }
        };
        if (detectChangesOnRender) {
            detectChanges();
        }
    }
}
async function createComponent(component) {
    /* Make sure angular application is initialized before creating component */
    await inject(ApplicationInitStatus).donePromise;
    return TestBed.createComponent(component);
}
function createComponentFixture(sut, { wrapper }) {
    if (typeof sut === 'string') {
        TestBed.overrideTemplate(wrapper, sut);
        return wrapper;
    }
    return sut;
}
function setComponentProperties(fixture, { componentProperties = {} }) {
    for (const key of Object.keys(componentProperties)) {
        const descriptor = Object.getOwnPropertyDescriptor(fixture.componentInstance.constructor.prototype, key);
        let _value = componentProperties[key];
        const defaultGetter = () => _value;
        const extendedSetter = (value) => {
            _value = value;
            descriptor?.set?.call(fixture.componentInstance, _value);
            fixture.detectChanges();
        };
        Object.defineProperty(fixture.componentInstance, key, {
            get: descriptor?.get || defaultGetter,
            set: extendedSetter,
            // Allow the property to be defined again later.
            // This happens when the component properties are updated after initial render.
            // For Jest this is `true` by default, for Karma and a real browser the default is `false`
            configurable: true,
        });
        descriptor?.set?.call(fixture.componentInstance, _value);
    }
    return fixture;
}
function hasOnChangesHook(componentInstance) {
    return ('ngOnChanges' in componentInstance && typeof componentInstance.ngOnChanges === 'function');
}
function getChangesObj(oldProps, newProps) {
    const isFirstChange = oldProps === null;
    return Object.keys(newProps).reduce((changes, key) => ({
        ...changes,
        [key]: new SimpleChange(isFirstChange ? null : oldProps[key], newProps[key], isFirstChange),
    }), {});
}
function addAutoDeclarations(sut, { declarations, excludeComponentDeclaration, wrapper, }) {
    if (typeof sut === 'string') {
        return [...declarations, wrapper];
    }
    const components = () => (excludeComponentDeclaration ? [] : [sut]);
    return [...declarations, ...components()];
}
function addAutoImports({ imports, routes }) {
    const animations = () => {
        const animationIsDefined = imports.indexOf(NoopAnimationsModule) > -1 || imports.indexOf(BrowserAnimationsModule) > -1;
        return animationIsDefined ? [] : [NoopAnimationsModule];
    };
    const routing = () => (routes ? [RouterTestingModule.withRoutes(routes)] : []);
    return [...imports, ...animations(), ...routing()];
}
/**
 * Wrap waitFor to invoke the Angular change detection cycle before invoking the callback
 */
async function waitForWrapper(detectChanges, callback, options) {
    let inFakeAsync = true;
    try {
        tick(0);
    }
    catch (err) {
        inFakeAsync = false;
    }
    detectChanges();
    return await dtlWaitFor(() => {
        setTimeout(() => detectChanges(), 0);
        if (inFakeAsync) {
            tick(0);
        }
        return callback();
    }, options);
}
/**
 * Wrap waitForElementToBeRemovedWrapper to poke the Angular change detection cycle before invoking the callback
 */
async function waitForElementToBeRemovedWrapper(detectChanges, callback, options) {
    let cb;
    if (typeof callback !== 'function') {
        const elements = (Array.isArray(callback) ? callback : [callback]);
        const getRemainingElements = elements.map((element) => {
            let parent = element.parentElement;
            while (parent.parentElement) {
                parent = parent.parentElement;
            }
            return () => (parent.contains(element) ? element : null);
        });
        cb = () => getRemainingElements.map((c) => c()).filter(Boolean);
    }
    else {
        cb = callback;
    }
    return await dtlWaitForElementToBeRemoved(() => {
        const result = cb();
        detectChanges();
        return result;
    }, options);
}
function cleanup() {
    mountedFixtures.forEach(cleanupAtFixture);
}
function cleanupAtFixture(fixture) {
    fixture.destroy();
    if (!fixture.nativeElement.getAttribute('ng-version') && fixture.nativeElement.parentNode === document.body) {
        document.body.removeChild(fixture.nativeElement);
    }
    mountedFixtures.delete(fixture);
}
// if we're running in a test runner that supports afterEach
// then we'll automatically run cleanup afterEach test
// this ensures that tests run in isolation from each other
// if you don't like this, set the ATL_SKIP_AUTO_CLEANUP env variable to 'true'
if (typeof process === 'undefined' || !process.env?.ATL_SKIP_AUTO_CLEANUP) {
    if (typeof afterEach === 'function') {
        afterEach(() => {
            cleanup();
        });
    }
}
class WrapperComponent {
}
WrapperComponent.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "13.0.2", ngImport: i0, type: WrapperComponent, deps: [], target: i0.ɵɵFactoryTarget.Component });
WrapperComponent.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: "12.0.0", version: "13.0.2", type: WrapperComponent, selector: "atl-wrapper-component", ngImport: i0, template: '', isInline: true });
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "13.0.2", ngImport: i0, type: WrapperComponent, decorators: [{
            type: Component,
            args: [{ selector: 'atl-wrapper-component', template: '' }]
        }] });
/**
 * Wrap findBy queries to poke the Angular change detection cycle
 */
function replaceFindWithFindAndDetectChanges(originalQueriesForContainer) {
    return Object.keys(originalQueriesForContainer).reduce((newQueries, key) => {
        const getByQuery = originalQueriesForContainer[key.replace('find', 'get')];
        if (key.startsWith('find') && getByQuery) {
            newQueries[key] = async (text, options, waitOptions) => {
                // original implementation at https://github.com/testing-library/dom-testing-library/blob/main/src/query-helpers.js
                const result = await waitForWrapper(detectChangesForMountedFixtures, () => getByQuery(text, options), waitOptions);
                return result;
            };
        }
        else {
            newQueries[key] = originalQueriesForContainer[key];
        }
        return newQueries;
    }, {});
}
/**
 * Call detectChanges for all fixtures
 */
function detectChangesForMountedFixtures() {
    mountedFixtures.forEach((fixture) => {
        try {
            fixture.detectChanges();
        }
        catch (err) {
            if (!err.message.startsWith('ViewDestroyedError')) {
                throw err;
            }
        }
    });
}
/**
 * Re-export screen with patched queries
 */
const screen = replaceFindWithFindAndDetectChanges(dtlScreen);
/**
 * Re-export within with patched queries
 */
const within = (element, queriesToBind) => {
    const container = dtlWithin(element, queriesToBind);
    return replaceFindWithFindAndDetectChanges(container);
};
/**
 * Re-export waitFor with patched waitFor
 */
async function waitFor(callback, options) {
    return waitForWrapper(detectChangesForMountedFixtures, callback, options);
}
/**
 * Re-export waitForElementToBeRemoved with patched waitForElementToBeRemoved
 */
async function waitForElementToBeRemoved(callback, options) {
    return waitForElementToBeRemovedWrapper(detectChangesForMountedFixtures, callback, options);
}
/**
 * Manually export otherwise we get the following error while running Jest tests
 * TypeError: Cannot set property fireEvent of [object Object] which has only a getter
 * exports.fireEvent = fireEvent
 */
export { fireEvent, buildQueries, getByLabelText, getAllByLabelText, queryByLabelText, queryAllByLabelText, findByLabelText, findAllByLabelText, getByPlaceholderText, getAllByPlaceholderText, queryByPlaceholderText, queryAllByPlaceholderText, findByPlaceholderText, findAllByPlaceholderText, getByText, getAllByText, queryByText, queryAllByText, findByText, findAllByText, getByAltText, getAllByAltText, queryByAltText, queryAllByAltText, findByAltText, findAllByAltText, getByTitle, getAllByTitle, queryByTitle, queryAllByTitle, findByTitle, findAllByTitle, getByDisplayValue, getAllByDisplayValue, queryByDisplayValue, queryAllByDisplayValue, findByDisplayValue, findAllByDisplayValue, getByRole, getAllByRole, queryByRole, queryAllByRole, findByRole, findAllByRole, getByTestId, getAllByTestId, queryByTestId, queryAllByTestId, findByTestId, findAllByTestId, createEvent, getDefaultNormalizer, getElementError, getNodeText, getQueriesForElement, getRoles, isInaccessible, logDOM, logRoles, prettyDOM, queries, queryAllByAttribute, queryByAttribute, queryHelpers, } from '@testing-library/dom';
// export patched dtl
export { screen, waitFor, waitForElementToBeRemoved, within };
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidGVzdGluZy1saWJyYXJ5LmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vLi4vLi4vcHJvamVjdHMvdGVzdGluZy1saWJyYXJ5L3NyYy9saWIvdGVzdGluZy1saWJyYXJ5LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLE9BQU8sRUFDTCxpQkFBaUIsRUFDakIsU0FBUyxFQUVULE1BQU0sRUFDTixZQUFZLEVBR1oscUJBQXFCLEdBQ3RCLE1BQU0sZUFBZSxDQUFDO0FBQ3ZCLE9BQU8sRUFBb0IsT0FBTyxFQUFFLElBQUksRUFBRSxNQUFNLHVCQUF1QixDQUFDO0FBQ3hFLE9BQU8sRUFBRSxFQUFFLEVBQUUsTUFBTSwyQkFBMkIsQ0FBQztBQUMvQyxPQUFPLEVBQUUsdUJBQXVCLEVBQUUsb0JBQW9CLEVBQUUsTUFBTSxzQ0FBc0MsQ0FBQztBQUNyRyxPQUFPLEVBQW9CLE1BQU0sRUFBRSxNQUFNLGlCQUFpQixDQUFDO0FBQzNELE9BQU8sRUFBRSxtQkFBbUIsRUFBRSxNQUFNLHlCQUF5QixDQUFDO0FBQzlELE9BQU8sRUFDTCxvQkFBb0IsSUFBSSx1QkFBdUIsRUFDL0MsU0FBUyxJQUFJLFlBQVksRUFDekIsT0FBTyxJQUFJLFVBQVUsRUFDckIseUJBQXlCLElBQUksNEJBQTRCLEVBQ3pELE1BQU0sSUFBSSxTQUFTLEVBQ25CLE1BQU0sSUFBSSxTQUFTLEVBRW5CLFNBQVMsSUFBSSxZQUFZLEdBSTFCLE1BQU0sc0JBQXNCLENBQUM7QUFFOUIsT0FBTyxFQUFFLFNBQVMsRUFBRSxNQUFNLFVBQVUsQ0FBQzs7QUFFckMsTUFBTSxlQUFlLEdBQUcsSUFBSSxHQUFHLEVBQXlCLENBQUM7QUFDekQsTUFBTSxNQUFNLEdBQUcsT0FBTyxDQUFDLE1BQU0sSUFBSSxPQUFPLENBQUMsR0FBRyxDQUFDO0FBVzdDLE1BQU0sQ0FBQyxLQUFLLFVBQVUsTUFBTSxDQUMxQixHQUEyQixFQUMzQixnQkFBc0YsRUFBRTtJQUV4RixNQUFNLEVBQUUsR0FBRyxFQUFFLFNBQVMsRUFBRSxHQUFHLFlBQVksRUFBRSxHQUFHLFNBQVMsRUFBRSxDQUFDO0lBQ3hELE1BQU0sRUFDSixhQUFhLEVBQUUscUJBQXFCLEdBQUcsSUFBSSxFQUMzQyxZQUFZLEdBQUcsRUFBRSxFQUNqQixPQUFPLEdBQUcsRUFBRSxFQUNaLFNBQVMsR0FBRyxFQUFFLEVBQ2QsT0FBTyxHQUFHLEVBQUUsRUFDWixPQUFPLEVBQ1AsUUFBUSxHQUFHLFNBQVMsRUFDcEIsT0FBTyxHQUFHLGdCQUFnQixFQUMxQixtQkFBbUIsR0FBRyxFQUFFLEVBQ3hCLGtCQUFrQixHQUFHLEVBQUUsRUFDdkIsMkJBQTJCLEdBQUcsS0FBSyxFQUNuQyxNQUFNLEVBQ04sdUJBQXVCLEdBQUcsS0FBSyxFQUMvQixjQUFjLEdBQUcsRUFBRSxHQUNwQixHQUFHLEVBQUUsR0FBRyxZQUFZLEVBQUUsR0FBRyxhQUFhLEVBQUUsQ0FBQztJQUUxQyxZQUFZLENBQUM7UUFDWCxZQUFZLEVBQUUsQ0FBQyxFQUFFLEVBQUUsRUFBRTtZQUNuQixNQUFNLE1BQU0sR0FBRyxFQUFFLEVBQUUsQ0FBQztZQUNwQiwrQkFBK0IsRUFBRSxDQUFDO1lBQ2xDLE9BQU8sTUFBTSxDQUFDO1FBQ2hCLENBQUM7UUFDRCxHQUFHLFNBQVM7S0FDYixDQUFDLENBQUM7SUFFSCxPQUFPLENBQUMsc0JBQXNCLENBQUM7UUFDN0IsWUFBWSxFQUFFLG1CQUFtQixDQUFDLEdBQUcsRUFBRTtZQUNyQyxZQUFZO1lBQ1osMkJBQTJCO1lBQzNCLE9BQU87U0FDUixDQUFDO1FBQ0YsT0FBTyxFQUFFLGNBQWMsQ0FBQztZQUN0QixPQUFPLEVBQUUsT0FBTyxDQUFDLE1BQU0sQ0FBQyxjQUFjLENBQUM7WUFDdkMsTUFBTTtTQUNQLENBQUM7UUFDRixTQUFTLEVBQUUsQ0FBQyxHQUFHLFNBQVMsQ0FBQztRQUN6QixPQUFPLEVBQUUsQ0FBQyxHQUFHLE9BQU8sQ0FBQztLQUN0QixDQUFDLENBQUM7SUFFSCxNQUFNLE9BQU8sQ0FBQyxpQkFBaUIsRUFBRSxDQUFDO0lBRWxDLGtCQUFrQjtTQUNmLE1BQU0sQ0FBQyxDQUFDLEdBQUcsRUFBRSxRQUFRLEVBQUUsRUFBRSxDQUFDLEdBQUcsQ0FBQyxNQUFNLENBQUMsUUFBUSxDQUFDLEVBQUUsRUFBRSxDQUFDO1NBQ25ELE9BQU8sQ0FBQyxDQUFDLENBQUMsRUFBRSxFQUFFO1FBQ2IsTUFBTSxFQUFFLE9BQU8sRUFBRSxHQUFHLFFBQVEsRUFBRSxHQUFHLENBQUMsQ0FBQztRQUNuQyxPQUFPLENBQUMsZ0JBQWdCLENBQUMsT0FBTyxFQUFFLFFBQVEsQ0FBQyxDQUFDO0lBQzlDLENBQUMsQ0FBQyxDQUFDO0lBRUwsTUFBTSxrQkFBa0IsR0FBRyxzQkFBc0IsQ0FBQyxHQUFHLEVBQUUsRUFBRSxPQUFPLEVBQUUsQ0FBQyxDQUFDO0lBRXBFLElBQUksT0FBa0MsQ0FBQztJQUN2QyxJQUFJLGFBQXlCLENBQUM7SUFFOUIsTUFBTSxhQUFhLENBQUMsbUJBQW1CLENBQUMsQ0FBQztJQUV6QyxNQUFNLFFBQVEsR0FBRyxLQUFLLEVBQUUsb0JBQXNDLEVBQUUsRUFBRTtRQUNoRSxNQUFNLGFBQWEsQ0FBQyxvQkFBb0IsQ0FBQyxDQUFDO0lBQzVDLENBQUMsQ0FBQztJQUVGLE1BQU0sTUFBTSxHQUFHLENBQUMsaUJBQW1DLEVBQUUsRUFBRTtRQUNyRCxNQUFNLE9BQU8sR0FBRyxhQUFhLENBQUMsT0FBTyxDQUFDLGlCQUFpQixFQUFFLGlCQUFpQixDQUFDLENBQUM7UUFFNUUsc0JBQXNCLENBQUMsT0FBTyxFQUFFLEVBQUUsbUJBQW1CLEVBQUUsaUJBQWlCLEVBQUUsQ0FBQyxDQUFDO1FBRTVFLElBQUksZ0JBQWdCLENBQUMsT0FBTyxDQUFDLGlCQUFpQixDQUFDLEVBQUU7WUFDL0MsT0FBTyxDQUFDLGlCQUFpQixDQUFDLFdBQVcsQ0FBQyxPQUFPLENBQUMsQ0FBQztTQUNoRDtRQUVELE9BQU8sQ0FBQyxZQUFZLENBQUMsUUFBUSxDQUFDLEdBQUcsQ0FBQyxpQkFBaUIsQ0FBQyxDQUFDLGFBQWEsRUFBRSxDQUFDO0lBQ3ZFLENBQUMsQ0FBQztJQUVGLElBQUksTUFBTSxHQUFHLE1BQU0sQ0FBQyxDQUFDLENBQUMsTUFBTSxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUM7SUFDNUMsTUFBTSxJQUFJLEdBQUcsTUFBTSxDQUFDLE1BQU0sQ0FBQyxDQUFDO0lBQzVCLE1BQU0sUUFBUSxHQUFHLEtBQUssRUFBRSxhQUErQixFQUFFLFFBQVEsR0FBRyxFQUFFLEVBQUUsRUFBRTtRQUN4RSxJQUFJLENBQUMsTUFBTSxFQUFFO1lBQ1gsTUFBTSxHQUFHLE1BQU0sQ0FBQyxNQUFNLENBQUMsQ0FBQztTQUN6QjtRQUVELE1BQU0sSUFBSSxHQUFHLE9BQU8sYUFBYSxLQUFLLFFBQVEsQ0FBQyxDQUFDLENBQUMsYUFBYSxDQUFDLENBQUMsQ0FBQyxhQUFhLENBQUMsWUFBWSxDQUFDLE1BQU0sQ0FBQyxDQUFDO1FBQ3BHLE1BQU0sQ0FBQyxJQUFJLEVBQUUsTUFBTSxDQUFDLEdBQUcsQ0FBQyxRQUFRLEdBQUcsSUFBSSxDQUFDLENBQUMsS0FBSyxDQUFDLEdBQUcsQ0FBQyxDQUFDO1FBQ3BELE1BQU0sV0FBVyxHQUFHLE1BQU07WUFDeEIsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxLQUFLLENBQUMsR0FBRyxDQUFDLENBQUMsTUFBTSxDQUFDLENBQUMsRUFBRSxFQUFFLENBQUMsRUFBRSxFQUFFO2dCQUNqQyxNQUFNLENBQUMsR0FBRyxFQUFFLEtBQUssQ0FBQyxHQUFHLENBQUMsQ0FBQyxLQUFLLENBQUMsR0FBRyxDQUFDLENBQUM7Z0JBQ2xDLE1BQU0sWUFBWSxHQUFHLEVBQUUsQ0FBQyxHQUFHLENBQUMsQ0FBQztnQkFDN0IsSUFBSSxPQUFPLFlBQVksS0FBSyxXQUFXLEVBQUU7b0JBQ3ZDLEVBQUUsQ0FBQyxHQUFHLENBQUMsR0FBRyxLQUFLLENBQUM7aUJBQ2pCO3FCQUFNLElBQUksS0FBSyxDQUFDLE9BQU8sQ0FBQyxZQUFZLENBQUMsRUFBRTtvQkFDdEMsRUFBRSxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsR0FBRyxZQUFZLEVBQUUsS0FBSyxDQUFDLENBQUM7aUJBQ3BDO3FCQUFNO29CQUNMLEVBQUUsQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLFlBQVksRUFBRSxLQUFLLENBQUMsQ0FBQztpQkFDakM7Z0JBQ0QsT0FBTyxFQUFFLENBQUM7WUFDWixDQUFDLEVBQUUsRUFBRSxDQUFDO1lBQ1IsQ0FBQyxDQUFDLFNBQVMsQ0FBQztRQUVkLE1BQU0sZUFBZSxHQUFxQixXQUFXO1lBQ25ELENBQUMsQ0FBQztnQkFDRSxXQUFXO2FBQ1o7WUFDSCxDQUFDLENBQUMsU0FBUyxDQUFDO1FBRWQsTUFBTSxVQUFVLEdBQUcsR0FBRyxFQUFFLENBQUMsQ0FBQyxlQUFlLENBQUMsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxRQUFRLENBQUMsQ0FBQyxJQUFJLENBQUMsRUFBRSxlQUFlLENBQUMsQ0FBQyxDQUFDLENBQUMsTUFBTSxDQUFDLFFBQVEsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUVoSCxJQUFJLE1BQU0sQ0FBQztRQUVYLElBQUksSUFBSSxFQUFFO1lBQ1IsTUFBTSxJQUFJLENBQUMsR0FBRyxDQUFDLEdBQUcsRUFBRSxDQUFDLENBQUMsTUFBTSxHQUFHLFVBQVUsRUFBRSxDQUFDLENBQUMsQ0FBQztTQUMvQzthQUFNO1lBQ0wsTUFBTSxHQUFHLFVBQVUsRUFBRSxDQUFDO1NBQ3ZCO1FBRUQsYUFBYSxFQUFFLENBQUM7UUFDaEIsT0FBTyxNQUFNLENBQUM7SUFDaEIsQ0FBQyxDQUFDO0lBRUYsT0FBTztRQUNMLE9BQU87UUFDUCxhQUFhLEVBQUUsR0FBRyxFQUFFLENBQUMsYUFBYSxFQUFFO1FBQ3BDLFFBQVE7UUFDUixRQUFRO1FBQ1IsTUFBTTtRQUNOLFlBQVksRUFBRSxPQUFPLEdBQUcsS0FBSyxRQUFRLENBQUMsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxZQUFZLENBQUMsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxZQUFZLENBQUMsS0FBSyxDQUFDLEVBQUUsQ0FBQyxTQUFTLENBQUMsR0FBRyxDQUFDLENBQUM7UUFDNUcsU0FBUyxFQUFFLE9BQU8sQ0FBQyxhQUFhO1FBQ2hDLEtBQUssRUFBRSxDQUFDLE9BQU8sR0FBRyxPQUFPLENBQUMsYUFBYSxFQUFFLFNBQVMsRUFBRSxPQUFPLEVBQUUsRUFBRSxDQUM3RCxLQUFLLENBQUMsT0FBTyxDQUFDLE9BQU8sQ0FBQztZQUNwQixDQUFDLENBQUMsT0FBTyxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsRUFBRSxFQUFFLENBQUMsT0FBTyxDQUFDLEdBQUcsQ0FBQyxZQUFZLENBQUMsQ0FBQyxFQUFFLFNBQVMsRUFBRSxPQUFPLENBQUMsQ0FBQyxDQUFDO1lBQzFFLENBQUMsQ0FBQyxPQUFPLENBQUMsR0FBRyxDQUFDLFlBQVksQ0FBQyxPQUFPLEVBQUUsU0FBUyxFQUFFLE9BQU8sQ0FBQyxDQUFDO1FBQzVELEdBQUcsbUNBQW1DLENBQUMsdUJBQXVCLENBQUMsT0FBTyxDQUFDLGFBQWEsRUFBRSxPQUFPLENBQUMsQ0FBQztLQUNoRyxDQUFDO0lBRUYsS0FBSyxVQUFVLGFBQWEsQ0FBQyxVQUE0QjtRQUN2RCxJQUFJLE9BQU8sRUFBRTtZQUNYLGdCQUFnQixDQUFDLE9BQU8sQ0FBQyxDQUFDO1NBQzNCO1FBRUQsT0FBTyxHQUFHLE1BQU0sZUFBZSxDQUFDLGtCQUFrQixDQUFDLENBQUM7UUFDcEQsc0JBQXNCLENBQUMsT0FBTyxFQUFFLEVBQUUsbUJBQW1CLEVBQUUsVUFBVSxFQUFFLENBQUMsQ0FBQztRQUVyRSxJQUFJLHVCQUF1QixFQUFFO1lBQzNCLE9BQU8sQ0FBQyxhQUFhLENBQUMsZUFBZSxDQUFDLFlBQVksQ0FBQyxDQUFDO1lBQ3BELE1BQU0sV0FBVyxHQUFHLE9BQU8sQ0FBQyxhQUFhLENBQUMsWUFBWSxDQUFDLElBQUksQ0FBQyxDQUFDO1lBQzdELElBQUksV0FBVyxJQUFJLFdBQVcsQ0FBQyxVQUFVLENBQUMsTUFBTSxDQUFDLEVBQUU7Z0JBQ2pELE9BQU8sQ0FBQyxhQUFhLENBQUMsZUFBZSxDQUFDLElBQUksQ0FBQyxDQUFDO2FBQzdDO1NBQ0Y7UUFDRCxlQUFlLENBQUMsR0FBRyxDQUFDLE9BQU8sQ0FBQyxDQUFDO1FBRTdCLElBQUksT0FBTyxHQUFHLElBQUksQ0FBQztRQUNuQixPQUFPLENBQUMsWUFBWSxDQUFDLFNBQVMsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxDQUFDLE9BQU8sR0FBRyxLQUFLLENBQUMsQ0FBQyxDQUFDO1FBRXhELElBQUksZ0JBQWdCLENBQUMsT0FBTyxDQUFDLGlCQUFpQixDQUFDLEVBQUU7WUFDL0MsTUFBTSxPQUFPLEdBQUcsYUFBYSxDQUFDLElBQUksRUFBRSxtQkFBbUIsQ0FBQyxDQUFDO1lBQ3pELE9BQU8sQ0FBQyxpQkFBaUIsQ0FBQyxXQUFXLENBQUMsT0FBTyxDQUFDLENBQUM7U0FDaEQ7UUFFRCxhQUFhLEdBQUcsR0FBRyxFQUFFO1lBQ25CLElBQUksT0FBTyxFQUFFO2dCQUNYLE9BQU8sQ0FBQyxhQUFhLEVBQUUsQ0FBQzthQUN6QjtRQUNILENBQUMsQ0FBQztRQUVGLElBQUkscUJBQXFCLEVBQUU7WUFDekIsYUFBYSxFQUFFLENBQUM7U0FDakI7SUFDSCxDQUFDO0FBQ0gsQ0FBQztBQUVELEtBQUssVUFBVSxlQUFlLENBQVUsU0FBd0I7SUFDOUQsNEVBQTRFO0lBQzVFLE1BQU0sTUFBTSxDQUFDLHFCQUFxQixDQUFDLENBQUMsV0FBVyxDQUFDO0lBQ2hELE9BQU8sT0FBTyxDQUFDLGVBQWUsQ0FBQyxTQUFTLENBQUMsQ0FBQztBQUM1QyxDQUFDO0FBRUQsU0FBUyxzQkFBc0IsQ0FDN0IsR0FBMkIsRUFDM0IsRUFBRSxPQUFPLEVBQW1EO0lBRTVELElBQUksT0FBTyxHQUFHLEtBQUssUUFBUSxFQUFFO1FBQzNCLE9BQU8sQ0FBQyxnQkFBZ0IsQ0FBQyxPQUFPLEVBQUUsR0FBRyxDQUFDLENBQUM7UUFDdkMsT0FBTyxPQUFPLENBQUM7S0FDaEI7SUFDRCxPQUFPLEdBQUcsQ0FBQztBQUNiLENBQUM7QUFFRCxTQUFTLHNCQUFzQixDQUM3QixPQUFrQyxFQUNsQyxFQUFFLG1CQUFtQixHQUFHLEVBQUUsRUFBb0U7SUFFOUYsS0FBSyxNQUFNLEdBQUcsSUFBSSxNQUFNLENBQUMsSUFBSSxDQUFDLG1CQUFtQixDQUFDLEVBQUU7UUFDbEQsTUFBTSxVQUFVLEdBQXVCLE1BQU0sQ0FBQyx3QkFBd0IsQ0FDcEUsT0FBTyxDQUFDLGlCQUFpQixDQUFDLFdBQVcsQ0FBQyxTQUFTLEVBQy9DLEdBQUcsQ0FDSixDQUFDO1FBQ0YsSUFBSSxNQUFNLEdBQUcsbUJBQW1CLENBQUMsR0FBRyxDQUFDLENBQUM7UUFDdEMsTUFBTSxhQUFhLEdBQUcsR0FBRyxFQUFFLENBQUMsTUFBTSxDQUFDO1FBQ25DLE1BQU0sY0FBYyxHQUFHLENBQUMsS0FBSyxFQUFFLEVBQUU7WUFDL0IsTUFBTSxHQUFHLEtBQUssQ0FBQztZQUNmLFVBQVUsRUFBRSxHQUFHLEVBQUUsSUFBSSxDQUFDLE9BQU8sQ0FBQyxpQkFBaUIsRUFBRSxNQUFNLENBQUMsQ0FBQztZQUN6RCxPQUFPLENBQUMsYUFBYSxFQUFFLENBQUM7UUFDMUIsQ0FBQyxDQUFDO1FBRUYsTUFBTSxDQUFDLGNBQWMsQ0FBQyxPQUFPLENBQUMsaUJBQWlCLEVBQUUsR0FBRyxFQUFFO1lBQ3BELEdBQUcsRUFBRSxVQUFVLEVBQUUsR0FBRyxJQUFJLGFBQWE7WUFDckMsR0FBRyxFQUFFLGNBQWM7WUFDbkIsZ0RBQWdEO1lBQ2hELCtFQUErRTtZQUMvRSwwRkFBMEY7WUFDMUYsWUFBWSxFQUFFLElBQUk7U0FDbkIsQ0FBQyxDQUFDO1FBRUgsVUFBVSxFQUFFLEdBQUcsRUFBRSxJQUFJLENBQUMsT0FBTyxDQUFDLGlCQUFpQixFQUFFLE1BQU0sQ0FBQyxDQUFDO0tBQzFEO0lBQ0QsT0FBTyxPQUFPLENBQUM7QUFDakIsQ0FBQztBQUVELFNBQVMsZ0JBQWdCLENBQVUsaUJBQTBCO0lBQzNELE9BQU8sQ0FDTCxhQUFhLElBQUksaUJBQWlCLElBQUksT0FBUSxpQkFBeUMsQ0FBQyxXQUFXLEtBQUssVUFBVSxDQUNuSCxDQUFDO0FBQ0osQ0FBQztBQUVELFNBQVMsYUFBYSxDQUFVLFFBQWlDLEVBQUUsUUFBMEI7SUFDM0YsTUFBTSxhQUFhLEdBQUcsUUFBUSxLQUFLLElBQUksQ0FBQztJQUN4QyxPQUFPLE1BQU0sQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDLENBQUMsTUFBTSxDQUNqQyxDQUFDLE9BQU8sRUFBRSxHQUFHLEVBQUUsRUFBRSxDQUFDLENBQUM7UUFDakIsR0FBRyxPQUFPO1FBQ1YsQ0FBQyxHQUFHLENBQUMsRUFBRSxJQUFJLFlBQVksQ0FBQyxhQUFhLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsUUFBUSxDQUFDLEdBQUcsQ0FBQyxFQUFFLFFBQVEsQ0FBQyxHQUFHLENBQUMsRUFBRSxhQUFhLENBQUM7S0FDNUYsQ0FBQyxFQUNGLEVBQUUsQ0FDSCxDQUFDO0FBQ0osQ0FBQztBQUVELFNBQVMsbUJBQW1CLENBQzFCLEdBQTJCLEVBQzNCLEVBQ0UsWUFBWSxFQUNaLDJCQUEyQixFQUMzQixPQUFPLEdBQ3NGO0lBRS9GLElBQUksT0FBTyxHQUFHLEtBQUssUUFBUSxFQUFFO1FBQzNCLE9BQU8sQ0FBQyxHQUFHLFlBQVksRUFBRSxPQUFPLENBQUMsQ0FBQztLQUNuQztJQUVELE1BQU0sVUFBVSxHQUFHLEdBQUcsRUFBRSxDQUFDLENBQUMsMkJBQTJCLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDO0lBQ3BFLE9BQU8sQ0FBQyxHQUFHLFlBQVksRUFBRSxHQUFHLFVBQVUsRUFBRSxDQUFDLENBQUM7QUFDNUMsQ0FBQztBQUVELFNBQVMsY0FBYyxDQUFDLEVBQUUsT0FBTyxFQUFFLE1BQU0sRUFBMkQ7SUFDbEcsTUFBTSxVQUFVLEdBQUcsR0FBRyxFQUFFO1FBQ3RCLE1BQU0sa0JBQWtCLEdBQ3RCLE9BQU8sQ0FBQyxPQUFPLENBQUMsb0JBQW9CLENBQUMsR0FBRyxDQUFDLENBQUMsSUFBSSxPQUFPLENBQUMsT0FBTyxDQUFDLHVCQUF1QixDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7UUFDOUYsT0FBTyxrQkFBa0IsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLG9CQUFvQixDQUFDLENBQUM7SUFDMUQsQ0FBQyxDQUFDO0lBRUYsTUFBTSxPQUFPLEdBQUcsR0FBRyxFQUFFLENBQUMsQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUMsbUJBQW1CLENBQUMsVUFBVSxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDO0lBRS9FLE9BQU8sQ0FBQyxHQUFHLE9BQU8sRUFBRSxHQUFHLFVBQVUsRUFBRSxFQUFFLEdBQUcsT0FBTyxFQUFFLENBQUMsQ0FBQztBQUNyRCxDQUFDO0FBRUQ7O0dBRUc7QUFDSCxLQUFLLFVBQVUsY0FBYyxDQUMzQixhQUF5QixFQUN6QixRQUFrRCxFQUNsRCxPQUEyQjtJQUUzQixJQUFJLFdBQVcsR0FBRyxJQUFJLENBQUM7SUFDdkIsSUFBSTtRQUNGLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQztLQUNUO0lBQUMsT0FBTyxHQUFHLEVBQUU7UUFDWixXQUFXLEdBQUcsS0FBSyxDQUFDO0tBQ3JCO0lBRUQsYUFBYSxFQUFFLENBQUM7SUFFaEIsT0FBTyxNQUFNLFVBQVUsQ0FBQyxHQUFHLEVBQUU7UUFDM0IsVUFBVSxDQUFDLEdBQUcsRUFBRSxDQUFDLGFBQWEsRUFBRSxFQUFFLENBQUMsQ0FBQyxDQUFDO1FBQ3JDLElBQUksV0FBVyxFQUFFO1lBQ2YsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDO1NBQ1Q7UUFDRCxPQUFPLFFBQVEsRUFBRSxDQUFDO0lBQ3BCLENBQUMsRUFBRSxPQUFPLENBQUMsQ0FBQztBQUNkLENBQUM7QUFFRDs7R0FFRztBQUNILEtBQUssVUFBVSxnQ0FBZ0MsQ0FDN0MsYUFBeUIsRUFDekIsUUFBdUIsRUFDdkIsT0FBMkI7SUFFM0IsSUFBSSxFQUFFLENBQUM7SUFDUCxJQUFJLE9BQU8sUUFBUSxLQUFLLFVBQVUsRUFBRTtRQUNsQyxNQUFNLFFBQVEsR0FBRyxDQUFDLEtBQUssQ0FBQyxPQUFPLENBQUMsUUFBUSxDQUFDLENBQUMsQ0FBQyxDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUMsQ0FBQyxRQUFRLENBQUMsQ0FBYyxDQUFDO1FBQ2hGLE1BQU0sb0JBQW9CLEdBQUcsUUFBUSxDQUFDLEdBQUcsQ0FBQyxDQUFDLE9BQU8sRUFBRSxFQUFFO1lBQ3BELElBQUksTUFBTSxHQUFHLE9BQU8sQ0FBQyxhQUFhLENBQUM7WUFDbkMsT0FBTyxNQUFNLENBQUMsYUFBYSxFQUFFO2dCQUMzQixNQUFNLEdBQUcsTUFBTSxDQUFDLGFBQWEsQ0FBQzthQUMvQjtZQUNELE9BQU8sR0FBRyxFQUFFLENBQUMsQ0FBQyxNQUFNLENBQUMsUUFBUSxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDO1FBQzNELENBQUMsQ0FBQyxDQUFDO1FBQ0gsRUFBRSxHQUFHLEdBQUcsRUFBRSxDQUFDLG9CQUFvQixDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsRUFBRSxFQUFFLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxNQUFNLENBQUMsT0FBTyxDQUFDLENBQUM7S0FDakU7U0FBTTtRQUNMLEVBQUUsR0FBRyxRQUFRLENBQUM7S0FDZjtJQUVELE9BQU8sTUFBTSw0QkFBNEIsQ0FBQyxHQUFHLEVBQUU7UUFDN0MsTUFBTSxNQUFNLEdBQUcsRUFBRSxFQUFFLENBQUM7UUFDcEIsYUFBYSxFQUFFLENBQUM7UUFDaEIsT0FBTyxNQUFNLENBQUM7SUFDaEIsQ0FBQyxFQUFFLE9BQU8sQ0FBQyxDQUFDO0FBQ2QsQ0FBQztBQUVELFNBQVMsT0FBTztJQUNkLGVBQWUsQ0FBQyxPQUFPLENBQUMsZ0JBQWdCLENBQUMsQ0FBQztBQUM1QyxDQUFDO0FBRUQsU0FBUyxnQkFBZ0IsQ0FBQyxPQUFPO0lBQy9CLE9BQU8sQ0FBQyxPQUFPLEVBQUUsQ0FBQztJQUVsQixJQUFJLENBQUMsT0FBTyxDQUFDLGFBQWEsQ0FBQyxZQUFZLENBQUMsWUFBWSxDQUFDLElBQUksT0FBTyxDQUFDLGFBQWEsQ0FBQyxVQUFVLEtBQUssUUFBUSxDQUFDLElBQUksRUFBRTtRQUMzRyxRQUFRLENBQUMsSUFBSSxDQUFDLFdBQVcsQ0FBQyxPQUFPLENBQUMsYUFBYSxDQUFDLENBQUM7S0FDbEQ7SUFDRCxlQUFlLENBQUMsTUFBTSxDQUFDLE9BQU8sQ0FBQyxDQUFDO0FBQ2xDLENBQUM7QUFFRCw0REFBNEQ7QUFDNUQsc0RBQXNEO0FBQ3RELDJEQUEyRDtBQUMzRCwrRUFBK0U7QUFDL0UsSUFBSSxPQUFPLE9BQU8sS0FBSyxXQUFXLElBQUksQ0FBQyxPQUFPLENBQUMsR0FBRyxFQUFFLHFCQUFxQixFQUFFO0lBQ3pFLElBQUksT0FBTyxTQUFTLEtBQUssVUFBVSxFQUFFO1FBQ25DLFNBQVMsQ0FBQyxHQUFHLEVBQUU7WUFDYixPQUFPLEVBQUUsQ0FBQztRQUNaLENBQUMsQ0FBQyxDQUFDO0tBQ0o7Q0FDRjtBQUVELE1BQ00sZ0JBQWdCOzs2R0FBaEIsZ0JBQWdCO2lHQUFoQixnQkFBZ0IsNkRBRG9DLEVBQUU7MkZBQ3RELGdCQUFnQjtrQkFEckIsU0FBUzttQkFBQyxFQUFFLFFBQVEsRUFBRSx1QkFBdUIsRUFBRSxRQUFRLEVBQUUsRUFBRSxFQUFFOztBQUc5RDs7R0FFRztBQUNILFNBQVMsbUNBQW1DLENBQUksMkJBQThCO0lBQzVFLE9BQU8sTUFBTSxDQUFDLElBQUksQ0FBQywyQkFBMkIsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxDQUFDLFVBQVUsRUFBRSxHQUFHLEVBQUUsRUFBRTtRQUN6RSxNQUFNLFVBQVUsR0FBRywyQkFBMkIsQ0FBQyxHQUFHLENBQUMsT0FBTyxDQUFDLE1BQU0sRUFBRSxLQUFLLENBQUMsQ0FBQyxDQUFDO1FBQzNFLElBQUksR0FBRyxDQUFDLFVBQVUsQ0FBQyxNQUFNLENBQUMsSUFBSSxVQUFVLEVBQUU7WUFDeEMsVUFBVSxDQUFDLEdBQUcsQ0FBQyxHQUFHLEtBQUssRUFBRSxJQUFJLEVBQUUsT0FBTyxFQUFFLFdBQVcsRUFBRSxFQUFFO2dCQUNyRCxtSEFBbUg7Z0JBQ25ILE1BQU0sTUFBTSxHQUFHLE1BQU0sY0FBYyxDQUNqQywrQkFBK0IsRUFDL0IsR0FBRyxFQUFFLENBQUMsVUFBVSxDQUFDLElBQUksRUFBRSxPQUFPLENBQUMsRUFDL0IsV0FBVyxDQUNaLENBQUM7Z0JBQ0YsT0FBTyxNQUFNLENBQUM7WUFDaEIsQ0FBQyxDQUFDO1NBQ0g7YUFBTTtZQUNMLFVBQVUsQ0FBQyxHQUFHLENBQUMsR0FBRywyQkFBMkIsQ0FBQyxHQUFHLENBQUMsQ0FBQztTQUNwRDtRQUVELE9BQU8sVUFBVSxDQUFDO0lBQ3BCLENBQUMsRUFBRSxFQUFPLENBQUMsQ0FBQztBQUNkLENBQUM7QUFFRDs7R0FFRztBQUNILFNBQVMsK0JBQStCO0lBQ3RDLGVBQWUsQ0FBQyxPQUFPLENBQUMsQ0FBQyxPQUFPLEVBQUUsRUFBRTtRQUNsQyxJQUFJO1lBQ0YsT0FBTyxDQUFDLGFBQWEsRUFBRSxDQUFDO1NBQ3pCO1FBQUMsT0FBTyxHQUFHLEVBQUU7WUFDWixJQUFJLENBQUMsR0FBRyxDQUFDLE9BQU8sQ0FBQyxVQUFVLENBQUMsb0JBQW9CLENBQUMsRUFBRTtnQkFDakQsTUFBTSxHQUFHLENBQUM7YUFDWDtTQUNGO0lBQ0gsQ0FBQyxDQUFDLENBQUM7QUFDTCxDQUFDO0FBRUQ7O0dBRUc7QUFDSCxNQUFNLE1BQU0sR0FBRyxtQ0FBbUMsQ0FBQyxTQUFTLENBQUMsQ0FBQztBQUU5RDs7R0FFRztBQUVILE1BQU0sTUFBTSxHQUFnQyxDQUMxQyxPQUFvQixFQUNwQixhQUFpQixFQUNqQixFQUFFO0lBQ0YsTUFBTSxTQUFTLEdBQUcsU0FBUyxDQUFDLE9BQU8sRUFBRSxhQUFhLENBQUMsQ0FBQztJQUNwRCxPQUFPLG1DQUFtQyxDQUFDLFNBQVMsQ0FBQyxDQUFDO0FBQ3hELENBQUMsQ0FBQztBQUVGOztHQUVHO0FBQ0gsS0FBSyxVQUFVLE9BQU8sQ0FBSSxRQUFrRCxFQUFFLE9BQTJCO0lBQ3ZHLE9BQU8sY0FBYyxDQUFDLCtCQUErQixFQUFFLFFBQVEsRUFBRSxPQUFPLENBQUMsQ0FBQztBQUM1RSxDQUFDO0FBRUQ7O0dBRUc7QUFDSCxLQUFLLFVBQVUseUJBQXlCLENBQUksUUFBdUIsRUFBRSxPQUEyQjtJQUM5RixPQUFPLGdDQUFnQyxDQUFDLCtCQUErQixFQUFFLFFBQVEsRUFBRSxPQUFPLENBQUMsQ0FBQztBQUM5RixDQUFDO0FBRUQ7Ozs7R0FJRztBQUNILE9BQU8sRUFDTCxTQUFTLEVBQ1QsWUFBWSxFQUNaLGNBQWMsRUFDZCxpQkFBaUIsRUFDakIsZ0JBQWdCLEVBQ2hCLG1CQUFtQixFQUNuQixlQUFlLEVBQ2Ysa0JBQWtCLEVBQ2xCLG9CQUFvQixFQUNwQix1QkFBdUIsRUFDdkIsc0JBQXNCLEVBQ3RCLHlCQUF5QixFQUN6QixxQkFBcUIsRUFDckIsd0JBQXdCLEVBQ3hCLFNBQVMsRUFDVCxZQUFZLEVBQ1osV0FBVyxFQUNYLGNBQWMsRUFDZCxVQUFVLEVBQ1YsYUFBYSxFQUNiLFlBQVksRUFDWixlQUFlLEVBQ2YsY0FBYyxFQUNkLGlCQUFpQixFQUNqQixhQUFhLEVBQ2IsZ0JBQWdCLEVBQ2hCLFVBQVUsRUFDVixhQUFhLEVBQ2IsWUFBWSxFQUNaLGVBQWUsRUFDZixXQUFXLEVBQ1gsY0FBYyxFQUNkLGlCQUFpQixFQUNqQixvQkFBb0IsRUFDcEIsbUJBQW1CLEVBQ25CLHNCQUFzQixFQUN0QixrQkFBa0IsRUFDbEIscUJBQXFCLEVBQ3JCLFNBQVMsRUFDVCxZQUFZLEVBQ1osV0FBVyxFQUNYLGNBQWMsRUFDZCxVQUFVLEVBQ1YsYUFBYSxFQUNiLFdBQVcsRUFDWCxjQUFjLEVBQ2QsYUFBYSxFQUNiLGdCQUFnQixFQUNoQixZQUFZLEVBQ1osZUFBZSxFQUNmLFdBQVcsRUFDWCxvQkFBb0IsRUFDcEIsZUFBZSxFQUNmLFdBQVcsRUFDWCxvQkFBb0IsRUFDcEIsUUFBUSxFQUNSLGNBQWMsRUFDZCxNQUFNLEVBQ04sUUFBUSxFQUNSLFNBQVMsRUFDVCxPQUFPLEVBQ1AsbUJBQW1CLEVBQ25CLGdCQUFnQixFQUNoQixZQUFZLEdBQ2IsTUFBTSxzQkFBc0IsQ0FBQztBQUU5QixxQkFBcUI7QUFDckIsT0FBTyxFQUFFLE1BQU0sRUFBRSxPQUFPLEVBQUUseUJBQXlCLEVBQUUsTUFBTSxFQUFFLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge1xuICBDaGFuZ2VEZXRlY3RvclJlZixcbiAgQ29tcG9uZW50LFxuICBUeXBlLFxuICBOZ1pvbmUsXG4gIFNpbXBsZUNoYW5nZSxcbiAgT25DaGFuZ2VzLFxuICBTaW1wbGVDaGFuZ2VzLFxuICBBcHBsaWNhdGlvbkluaXRTdGF0dXMsXG59IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHsgQ29tcG9uZW50Rml4dHVyZSwgVGVzdEJlZCwgdGljayB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUvdGVzdGluZyc7XG5pbXBvcnQgeyBCeSB9IGZyb20gJ0Bhbmd1bGFyL3BsYXRmb3JtLWJyb3dzZXInO1xuaW1wb3J0IHsgQnJvd3NlckFuaW1hdGlvbnNNb2R1bGUsIE5vb3BBbmltYXRpb25zTW9kdWxlIH0gZnJvbSAnQGFuZ3VsYXIvcGxhdGZvcm0tYnJvd3Nlci9hbmltYXRpb25zJztcbmltcG9ydCB7IE5hdmlnYXRpb25FeHRyYXMsIFJvdXRlciB9IGZyb20gJ0Bhbmd1bGFyL3JvdXRlcic7XG5pbXBvcnQgeyBSb3V0ZXJUZXN0aW5nTW9kdWxlIH0gZnJvbSAnQGFuZ3VsYXIvcm91dGVyL3Rlc3RpbmcnO1xuaW1wb3J0IHtcbiAgZ2V0UXVlcmllc0ZvckVsZW1lbnQgYXMgZHRsR2V0UXVlcmllc0ZvckVsZW1lbnQsXG4gIHByZXR0eURPTSBhcyBkdGxQcmV0dHlET00sXG4gIHdhaXRGb3IgYXMgZHRsV2FpdEZvcixcbiAgd2FpdEZvckVsZW1lbnRUb0JlUmVtb3ZlZCBhcyBkdGxXYWl0Rm9yRWxlbWVudFRvQmVSZW1vdmVkLFxuICBzY3JlZW4gYXMgZHRsU2NyZWVuLFxuICB3aXRoaW4gYXMgZHRsV2l0aGluLFxuICB3YWl0Rm9yT3B0aW9ucyBhcyBkdGxXYWl0Rm9yT3B0aW9ucyxcbiAgY29uZmlndXJlIGFzIGR0bENvbmZpZ3VyZSxcbiAgUXVlcmllcyxcbiAgZ2V0UXVlcmllc0ZvckVsZW1lbnQsXG4gIHF1ZXJpZXMgYXMgZHRsUXVlcmllcyxcbn0gZnJvbSAnQHRlc3RpbmctbGlicmFyeS9kb20nO1xuaW1wb3J0IHsgUmVuZGVyQ29tcG9uZW50T3B0aW9ucywgUmVuZGVyVGVtcGxhdGVPcHRpb25zLCBSZW5kZXJSZXN1bHQgfSBmcm9tICcuL21vZGVscyc7XG5pbXBvcnQgeyBnZXRDb25maWcgfSBmcm9tICcuL2NvbmZpZyc7XG5cbmNvbnN0IG1vdW50ZWRGaXh0dXJlcyA9IG5ldyBTZXQ8Q29tcG9uZW50Rml4dHVyZTxhbnk+PigpO1xuY29uc3QgaW5qZWN0ID0gVGVzdEJlZC5pbmplY3QgfHwgVGVzdEJlZC5nZXQ7XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiByZW5kZXI8Q29tcG9uZW50VHlwZT4oXG4gIGNvbXBvbmVudDogVHlwZTxDb21wb25lbnRUeXBlPixcbiAgcmVuZGVyT3B0aW9ucz86IFJlbmRlckNvbXBvbmVudE9wdGlvbnM8Q29tcG9uZW50VHlwZT4sXG4pOiBQcm9taXNlPFJlbmRlclJlc3VsdDxDb21wb25lbnRUeXBlLCBDb21wb25lbnRUeXBlPj47XG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gcmVuZGVyPFdyYXBwZXJUeXBlID0gV3JhcHBlckNvbXBvbmVudD4oXG4gIHRlbXBsYXRlOiBzdHJpbmcsXG4gIHJlbmRlck9wdGlvbnM/OiBSZW5kZXJUZW1wbGF0ZU9wdGlvbnM8V3JhcHBlclR5cGU+LFxuKTogUHJvbWlzZTxSZW5kZXJSZXN1bHQ8V3JhcHBlclR5cGU+PjtcblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHJlbmRlcjxTdXRUeXBlLCBXcmFwcGVyVHlwZSA9IFN1dFR5cGU+KFxuICBzdXQ6IFR5cGU8U3V0VHlwZT4gfCBzdHJpbmcsXG4gIHJlbmRlck9wdGlvbnM6IFJlbmRlckNvbXBvbmVudE9wdGlvbnM8U3V0VHlwZT4gfCBSZW5kZXJUZW1wbGF0ZU9wdGlvbnM8V3JhcHBlclR5cGU+ID0ge30sXG4pOiBQcm9taXNlPFJlbmRlclJlc3VsdDxTdXRUeXBlPj4ge1xuICBjb25zdCB7IGRvbTogZG9tQ29uZmlnLCAuLi5nbG9iYWxDb25maWcgfSA9IGdldENvbmZpZygpO1xuICBjb25zdCB7XG4gICAgZGV0ZWN0Q2hhbmdlczogZGV0ZWN0Q2hhbmdlc09uUmVuZGVyID0gdHJ1ZSxcbiAgICBkZWNsYXJhdGlvbnMgPSBbXSxcbiAgICBpbXBvcnRzID0gW10sXG4gICAgcHJvdmlkZXJzID0gW10sXG4gICAgc2NoZW1hcyA9IFtdLFxuICAgIHF1ZXJpZXMsXG4gICAgdGVtcGxhdGUgPSB1bmRlZmluZWQsXG4gICAgd3JhcHBlciA9IFdyYXBwZXJDb21wb25lbnQsXG4gICAgY29tcG9uZW50UHJvcGVydGllcyA9IHt9LFxuICAgIGNvbXBvbmVudFByb3ZpZGVycyA9IFtdLFxuICAgIGV4Y2x1ZGVDb21wb25lbnREZWNsYXJhdGlvbiA9IGZhbHNlLFxuICAgIHJvdXRlcyxcbiAgICByZW1vdmVBbmd1bGFyQXR0cmlidXRlcyA9IGZhbHNlLFxuICAgIGRlZmF1bHRJbXBvcnRzID0gW10sXG4gIH0gPSB7IC4uLmdsb2JhbENvbmZpZywgLi4ucmVuZGVyT3B0aW9ucyB9O1xuXG4gIGR0bENvbmZpZ3VyZSh7XG4gICAgZXZlbnRXcmFwcGVyOiAoY2IpID0+IHtcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGNiKCk7XG4gICAgICBkZXRlY3RDaGFuZ2VzRm9yTW91bnRlZEZpeHR1cmVzKCk7XG4gICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH0sXG4gICAgLi4uZG9tQ29uZmlnLFxuICB9KTtcblxuICBUZXN0QmVkLmNvbmZpZ3VyZVRlc3RpbmdNb2R1bGUoe1xuICAgIGRlY2xhcmF0aW9uczogYWRkQXV0b0RlY2xhcmF0aW9ucyhzdXQsIHtcbiAgICAgIGRlY2xhcmF0aW9ucyxcbiAgICAgIGV4Y2x1ZGVDb21wb25lbnREZWNsYXJhdGlvbixcbiAgICAgIHdyYXBwZXIsXG4gICAgfSksXG4gICAgaW1wb3J0czogYWRkQXV0b0ltcG9ydHMoe1xuICAgICAgaW1wb3J0czogaW1wb3J0cy5jb25jYXQoZGVmYXVsdEltcG9ydHMpLFxuICAgICAgcm91dGVzLFxuICAgIH0pLFxuICAgIHByb3ZpZGVyczogWy4uLnByb3ZpZGVyc10sXG4gICAgc2NoZW1hczogWy4uLnNjaGVtYXNdLFxuICB9KTtcblxuICBhd2FpdCBUZXN0QmVkLmNvbXBpbGVDb21wb25lbnRzKCk7XG5cbiAgY29tcG9uZW50UHJvdmlkZXJzXG4gICAgLnJlZHVjZSgoYWNjLCBwcm92aWRlcikgPT4gYWNjLmNvbmNhdChwcm92aWRlciksIFtdKVxuICAgIC5mb3JFYWNoKChwKSA9PiB7XG4gICAgICBjb25zdCB7IHByb3ZpZGUsIC4uLnByb3ZpZGVyIH0gPSBwO1xuICAgICAgVGVzdEJlZC5vdmVycmlkZVByb3ZpZGVyKHByb3ZpZGUsIHByb3ZpZGVyKTtcbiAgICB9KTtcblxuICBjb25zdCBjb21wb25lbnRDb250YWluZXIgPSBjcmVhdGVDb21wb25lbnRGaXh0dXJlKHN1dCwgeyB3cmFwcGVyIH0pO1xuXG4gIGxldCBmaXh0dXJlOiBDb21wb25lbnRGaXh0dXJlPFN1dFR5cGU+O1xuICBsZXQgZGV0ZWN0Q2hhbmdlczogKCkgPT4gdm9pZDtcblxuICBhd2FpdCByZW5kZXJGaXh0dXJlKGNvbXBvbmVudFByb3BlcnRpZXMpO1xuXG4gIGNvbnN0IHJlcmVuZGVyID0gYXN5bmMgKHJlcmVuZGVyZWRQcm9wZXJ0aWVzOiBQYXJ0aWFsPFN1dFR5cGU+KSA9PiB7XG4gICAgYXdhaXQgcmVuZGVyRml4dHVyZShyZXJlbmRlcmVkUHJvcGVydGllcyk7XG4gIH07XG5cbiAgY29uc3QgY2hhbmdlID0gKGNoYW5nZWRQcm9wZXJ0aWVzOiBQYXJ0aWFsPFN1dFR5cGU+KSA9PiB7XG4gICAgY29uc3QgY2hhbmdlcyA9IGdldENoYW5nZXNPYmooZml4dHVyZS5jb21wb25lbnRJbnN0YW5jZSwgY2hhbmdlZFByb3BlcnRpZXMpO1xuXG4gICAgc2V0Q29tcG9uZW50UHJvcGVydGllcyhmaXh0dXJlLCB7IGNvbXBvbmVudFByb3BlcnRpZXM6IGNoYW5nZWRQcm9wZXJ0aWVzIH0pO1xuXG4gICAgaWYgKGhhc09uQ2hhbmdlc0hvb2soZml4dHVyZS5jb21wb25lbnRJbnN0YW5jZSkpIHtcbiAgICAgIGZpeHR1cmUuY29tcG9uZW50SW5zdGFuY2UubmdPbkNoYW5nZXMoY2hhbmdlcyk7XG4gICAgfVxuXG4gICAgZml4dHVyZS5jb21wb25lbnRSZWYuaW5qZWN0b3IuZ2V0KENoYW5nZURldGVjdG9yUmVmKS5kZXRlY3RDaGFuZ2VzKCk7XG4gIH07XG5cbiAgbGV0IHJvdXRlciA9IHJvdXRlcyA/IGluamVjdChSb3V0ZXIpIDogbnVsbDtcbiAgY29uc3Qgem9uZSA9IGluamVjdChOZ1pvbmUpO1xuICBjb25zdCBuYXZpZ2F0ZSA9IGFzeW5jIChlbGVtZW50T3JQYXRoOiBFbGVtZW50IHwgc3RyaW5nLCBiYXNlUGF0aCA9ICcnKSA9PiB7XG4gICAgaWYgKCFyb3V0ZXIpIHtcbiAgICAgIHJvdXRlciA9IGluamVjdChSb3V0ZXIpO1xuICAgIH1cblxuICAgIGNvbnN0IGhyZWYgPSB0eXBlb2YgZWxlbWVudE9yUGF0aCA9PT0gJ3N0cmluZycgPyBlbGVtZW50T3JQYXRoIDogZWxlbWVudE9yUGF0aC5nZXRBdHRyaWJ1dGUoJ2hyZWYnKTtcbiAgICBjb25zdCBbcGF0aCwgcGFyYW1zXSA9IChiYXNlUGF0aCArIGhyZWYpLnNwbGl0KCc/Jyk7XG4gICAgY29uc3QgcXVlcnlQYXJhbXMgPSBwYXJhbXNcbiAgICAgID8gcGFyYW1zLnNwbGl0KCcmJykucmVkdWNlKChxcCwgcSkgPT4ge1xuICAgICAgICAgIGNvbnN0IFtrZXksIHZhbHVlXSA9IHEuc3BsaXQoJz0nKTtcbiAgICAgICAgICBjb25zdCBjdXJyZW50VmFsdWUgPSBxcFtrZXldO1xuICAgICAgICAgIGlmICh0eXBlb2YgY3VycmVudFZhbHVlID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgcXBba2V5XSA9IHZhbHVlO1xuICAgICAgICAgIH0gZWxzZSBpZiAoQXJyYXkuaXNBcnJheShjdXJyZW50VmFsdWUpKSB7XG4gICAgICAgICAgICBxcFtrZXldID0gWy4uLmN1cnJlbnRWYWx1ZSwgdmFsdWVdO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBxcFtrZXldID0gW2N1cnJlbnRWYWx1ZSwgdmFsdWVdO1xuICAgICAgICAgIH1cbiAgICAgICAgICByZXR1cm4gcXA7XG4gICAgICAgIH0sIHt9KVxuICAgICAgOiB1bmRlZmluZWQ7XG5cbiAgICBjb25zdCBuYXZpZ2F0ZU9wdGlvbnM6IE5hdmlnYXRpb25FeHRyYXMgPSBxdWVyeVBhcmFtc1xuICAgICAgPyB7XG4gICAgICAgICAgcXVlcnlQYXJhbXMsXG4gICAgICAgIH1cbiAgICAgIDogdW5kZWZpbmVkO1xuXG4gICAgY29uc3QgZG9OYXZpZ2F0ZSA9ICgpID0+IChuYXZpZ2F0ZU9wdGlvbnMgPyByb3V0ZXIubmF2aWdhdGUoW3BhdGhdLCBuYXZpZ2F0ZU9wdGlvbnMpIDogcm91dGVyLm5hdmlnYXRlKFtwYXRoXSkpO1xuXG4gICAgbGV0IHJlc3VsdDtcblxuICAgIGlmICh6b25lKSB7XG4gICAgICBhd2FpdCB6b25lLnJ1bigoKSA9PiAocmVzdWx0ID0gZG9OYXZpZ2F0ZSgpKSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJlc3VsdCA9IGRvTmF2aWdhdGUoKTtcbiAgICB9XG5cbiAgICBkZXRlY3RDaGFuZ2VzKCk7XG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfTtcblxuICByZXR1cm4ge1xuICAgIGZpeHR1cmUsXG4gICAgZGV0ZWN0Q2hhbmdlczogKCkgPT4gZGV0ZWN0Q2hhbmdlcygpLFxuICAgIG5hdmlnYXRlLFxuICAgIHJlcmVuZGVyLFxuICAgIGNoYW5nZSxcbiAgICBkZWJ1Z0VsZW1lbnQ6IHR5cGVvZiBzdXQgPT09ICdzdHJpbmcnID8gZml4dHVyZS5kZWJ1Z0VsZW1lbnQgOiBmaXh0dXJlLmRlYnVnRWxlbWVudC5xdWVyeShCeS5kaXJlY3RpdmUoc3V0KSksXG4gICAgY29udGFpbmVyOiBmaXh0dXJlLm5hdGl2ZUVsZW1lbnQsXG4gICAgZGVidWc6IChlbGVtZW50ID0gZml4dHVyZS5uYXRpdmVFbGVtZW50LCBtYXhMZW5ndGgsIG9wdGlvbnMpID0+XG4gICAgICBBcnJheS5pc0FycmF5KGVsZW1lbnQpXG4gICAgICAgID8gZWxlbWVudC5mb3JFYWNoKChlKSA9PiBjb25zb2xlLmxvZyhkdGxQcmV0dHlET00oZSwgbWF4TGVuZ3RoLCBvcHRpb25zKSkpXG4gICAgICAgIDogY29uc29sZS5sb2coZHRsUHJldHR5RE9NKGVsZW1lbnQsIG1heExlbmd0aCwgb3B0aW9ucykpLFxuICAgIC4uLnJlcGxhY2VGaW5kV2l0aEZpbmRBbmREZXRlY3RDaGFuZ2VzKGR0bEdldFF1ZXJpZXNGb3JFbGVtZW50KGZpeHR1cmUubmF0aXZlRWxlbWVudCwgcXVlcmllcykpLFxuICB9O1xuXG4gIGFzeW5jIGZ1bmN0aW9uIHJlbmRlckZpeHR1cmUocHJvcGVydGllczogUGFydGlhbDxTdXRUeXBlPikge1xuICAgIGlmIChmaXh0dXJlKSB7XG4gICAgICBjbGVhbnVwQXRGaXh0dXJlKGZpeHR1cmUpO1xuICAgIH1cblxuICAgIGZpeHR1cmUgPSBhd2FpdCBjcmVhdGVDb21wb25lbnQoY29tcG9uZW50Q29udGFpbmVyKTtcbiAgICBzZXRDb21wb25lbnRQcm9wZXJ0aWVzKGZpeHR1cmUsIHsgY29tcG9uZW50UHJvcGVydGllczogcHJvcGVydGllcyB9KTtcblxuICAgIGlmIChyZW1vdmVBbmd1bGFyQXR0cmlidXRlcykge1xuICAgICAgZml4dHVyZS5uYXRpdmVFbGVtZW50LnJlbW92ZUF0dHJpYnV0ZSgnbmctdmVyc2lvbicpO1xuICAgICAgY29uc3QgaWRBdHRyaWJ1dGUgPSBmaXh0dXJlLm5hdGl2ZUVsZW1lbnQuZ2V0QXR0cmlidXRlKCdpZCcpO1xuICAgICAgaWYgKGlkQXR0cmlidXRlICYmIGlkQXR0cmlidXRlLnN0YXJ0c1dpdGgoJ3Jvb3QnKSkge1xuICAgICAgICBmaXh0dXJlLm5hdGl2ZUVsZW1lbnQucmVtb3ZlQXR0cmlidXRlKCdpZCcpO1xuICAgICAgfVxuICAgIH1cbiAgICBtb3VudGVkRml4dHVyZXMuYWRkKGZpeHR1cmUpO1xuXG4gICAgbGV0IGlzQWxpdmUgPSB0cnVlO1xuICAgIGZpeHR1cmUuY29tcG9uZW50UmVmLm9uRGVzdHJveSgoKSA9PiAoaXNBbGl2ZSA9IGZhbHNlKSk7XG5cbiAgICBpZiAoaGFzT25DaGFuZ2VzSG9vayhmaXh0dXJlLmNvbXBvbmVudEluc3RhbmNlKSkge1xuICAgICAgY29uc3QgY2hhbmdlcyA9IGdldENoYW5nZXNPYmoobnVsbCwgY29tcG9uZW50UHJvcGVydGllcyk7XG4gICAgICBmaXh0dXJlLmNvbXBvbmVudEluc3RhbmNlLm5nT25DaGFuZ2VzKGNoYW5nZXMpO1xuICAgIH1cblxuICAgIGRldGVjdENoYW5nZXMgPSAoKSA9PiB7XG4gICAgICBpZiAoaXNBbGl2ZSkge1xuICAgICAgICBmaXh0dXJlLmRldGVjdENoYW5nZXMoKTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgaWYgKGRldGVjdENoYW5nZXNPblJlbmRlcikge1xuICAgICAgZGV0ZWN0Q2hhbmdlcygpO1xuICAgIH1cbiAgfVxufVxuXG5hc3luYyBmdW5jdGlvbiBjcmVhdGVDb21wb25lbnQ8U3V0VHlwZT4oY29tcG9uZW50OiBUeXBlPFN1dFR5cGU+KTogUHJvbWlzZTxDb21wb25lbnRGaXh0dXJlPFN1dFR5cGU+PiB7XG4gIC8qIE1ha2Ugc3VyZSBhbmd1bGFyIGFwcGxpY2F0aW9uIGlzIGluaXRpYWxpemVkIGJlZm9yZSBjcmVhdGluZyBjb21wb25lbnQgKi9cbiAgYXdhaXQgaW5qZWN0KEFwcGxpY2F0aW9uSW5pdFN0YXR1cykuZG9uZVByb21pc2U7XG4gIHJldHVybiBUZXN0QmVkLmNyZWF0ZUNvbXBvbmVudChjb21wb25lbnQpO1xufVxuXG5mdW5jdGlvbiBjcmVhdGVDb21wb25lbnRGaXh0dXJlPFN1dFR5cGU+KFxuICBzdXQ6IFR5cGU8U3V0VHlwZT4gfCBzdHJpbmcsXG4gIHsgd3JhcHBlciB9OiBQaWNrPFJlbmRlclRlbXBsYXRlT3B0aW9uczxTdXRUeXBlPiwgJ3dyYXBwZXInPixcbik6IFR5cGU8YW55PiB7XG4gIGlmICh0eXBlb2Ygc3V0ID09PSAnc3RyaW5nJykge1xuICAgIFRlc3RCZWQub3ZlcnJpZGVUZW1wbGF0ZSh3cmFwcGVyLCBzdXQpO1xuICAgIHJldHVybiB3cmFwcGVyO1xuICB9XG4gIHJldHVybiBzdXQ7XG59XG5cbmZ1bmN0aW9uIHNldENvbXBvbmVudFByb3BlcnRpZXM8U3V0VHlwZT4oXG4gIGZpeHR1cmU6IENvbXBvbmVudEZpeHR1cmU8U3V0VHlwZT4sXG4gIHsgY29tcG9uZW50UHJvcGVydGllcyA9IHt9IH06IFBpY2s8UmVuZGVyVGVtcGxhdGVPcHRpb25zPFN1dFR5cGUsIGFueT4sICdjb21wb25lbnRQcm9wZXJ0aWVzJz4sXG4pIHtcbiAgZm9yIChjb25zdCBrZXkgb2YgT2JqZWN0LmtleXMoY29tcG9uZW50UHJvcGVydGllcykpIHtcbiAgICBjb25zdCBkZXNjcmlwdG9yOiBQcm9wZXJ0eURlc2NyaXB0b3IgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKFxuICAgICAgZml4dHVyZS5jb21wb25lbnRJbnN0YW5jZS5jb25zdHJ1Y3Rvci5wcm90b3R5cGUsXG4gICAgICBrZXksXG4gICAgKTtcbiAgICBsZXQgX3ZhbHVlID0gY29tcG9uZW50UHJvcGVydGllc1trZXldO1xuICAgIGNvbnN0IGRlZmF1bHRHZXR0ZXIgPSAoKSA9PiBfdmFsdWU7XG4gICAgY29uc3QgZXh0ZW5kZWRTZXR0ZXIgPSAodmFsdWUpID0+IHtcbiAgICAgIF92YWx1ZSA9IHZhbHVlO1xuICAgICAgZGVzY3JpcHRvcj8uc2V0Py5jYWxsKGZpeHR1cmUuY29tcG9uZW50SW5zdGFuY2UsIF92YWx1ZSk7XG4gICAgICBmaXh0dXJlLmRldGVjdENoYW5nZXMoKTtcbiAgICB9O1xuXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGZpeHR1cmUuY29tcG9uZW50SW5zdGFuY2UsIGtleSwge1xuICAgICAgZ2V0OiBkZXNjcmlwdG9yPy5nZXQgfHwgZGVmYXVsdEdldHRlcixcbiAgICAgIHNldDogZXh0ZW5kZWRTZXR0ZXIsXG4gICAgICAvLyBBbGxvdyB0aGUgcHJvcGVydHkgdG8gYmUgZGVmaW5lZCBhZ2FpbiBsYXRlci5cbiAgICAgIC8vIFRoaXMgaGFwcGVucyB3aGVuIHRoZSBjb21wb25lbnQgcHJvcGVydGllcyBhcmUgdXBkYXRlZCBhZnRlciBpbml0aWFsIHJlbmRlci5cbiAgICAgIC8vIEZvciBKZXN0IHRoaXMgaXMgYHRydWVgIGJ5IGRlZmF1bHQsIGZvciBLYXJtYSBhbmQgYSByZWFsIGJyb3dzZXIgdGhlIGRlZmF1bHQgaXMgYGZhbHNlYFxuICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgIH0pO1xuXG4gICAgZGVzY3JpcHRvcj8uc2V0Py5jYWxsKGZpeHR1cmUuY29tcG9uZW50SW5zdGFuY2UsIF92YWx1ZSk7XG4gIH1cbiAgcmV0dXJuIGZpeHR1cmU7XG59XG5cbmZ1bmN0aW9uIGhhc09uQ2hhbmdlc0hvb2s8U3V0VHlwZT4oY29tcG9uZW50SW5zdGFuY2U6IFN1dFR5cGUpOiBjb21wb25lbnRJbnN0YW5jZSBpcyBTdXRUeXBlICYgT25DaGFuZ2VzIHtcbiAgcmV0dXJuIChcbiAgICAnbmdPbkNoYW5nZXMnIGluIGNvbXBvbmVudEluc3RhbmNlICYmIHR5cGVvZiAoY29tcG9uZW50SW5zdGFuY2UgYXMgU3V0VHlwZSAmIE9uQ2hhbmdlcykubmdPbkNoYW5nZXMgPT09ICdmdW5jdGlvbidcbiAgKTtcbn1cblxuZnVuY3Rpb24gZ2V0Q2hhbmdlc09iajxTdXRUeXBlPihvbGRQcm9wczogUGFydGlhbDxTdXRUeXBlPiB8IG51bGwsIG5ld1Byb3BzOiBQYXJ0aWFsPFN1dFR5cGU+KSB7XG4gIGNvbnN0IGlzRmlyc3RDaGFuZ2UgPSBvbGRQcm9wcyA9PT0gbnVsbDtcbiAgcmV0dXJuIE9iamVjdC5rZXlzKG5ld1Byb3BzKS5yZWR1Y2U8U2ltcGxlQ2hhbmdlcz4oXG4gICAgKGNoYW5nZXMsIGtleSkgPT4gKHtcbiAgICAgIC4uLmNoYW5nZXMsXG4gICAgICBba2V5XTogbmV3IFNpbXBsZUNoYW5nZShpc0ZpcnN0Q2hhbmdlID8gbnVsbCA6IG9sZFByb3BzW2tleV0sIG5ld1Byb3BzW2tleV0sIGlzRmlyc3RDaGFuZ2UpLFxuICAgIH0pLFxuICAgIHt9LFxuICApO1xufVxuXG5mdW5jdGlvbiBhZGRBdXRvRGVjbGFyYXRpb25zPFN1dFR5cGU+KFxuICBzdXQ6IFR5cGU8U3V0VHlwZT4gfCBzdHJpbmcsXG4gIHtcbiAgICBkZWNsYXJhdGlvbnMsXG4gICAgZXhjbHVkZUNvbXBvbmVudERlY2xhcmF0aW9uLFxuICAgIHdyYXBwZXIsXG4gIH06IFBpY2s8UmVuZGVyVGVtcGxhdGVPcHRpb25zPGFueT4sICdkZWNsYXJhdGlvbnMnIHwgJ2V4Y2x1ZGVDb21wb25lbnREZWNsYXJhdGlvbicgfCAnd3JhcHBlcic+LFxuKSB7XG4gIGlmICh0eXBlb2Ygc3V0ID09PSAnc3RyaW5nJykge1xuICAgIHJldHVybiBbLi4uZGVjbGFyYXRpb25zLCB3cmFwcGVyXTtcbiAgfVxuXG4gIGNvbnN0IGNvbXBvbmVudHMgPSAoKSA9PiAoZXhjbHVkZUNvbXBvbmVudERlY2xhcmF0aW9uID8gW10gOiBbc3V0XSk7XG4gIHJldHVybiBbLi4uZGVjbGFyYXRpb25zLCAuLi5jb21wb25lbnRzKCldO1xufVxuXG5mdW5jdGlvbiBhZGRBdXRvSW1wb3J0cyh7IGltcG9ydHMsIHJvdXRlcyB9OiBQaWNrPFJlbmRlckNvbXBvbmVudE9wdGlvbnM8YW55PiwgJ2ltcG9ydHMnIHwgJ3JvdXRlcyc+KSB7XG4gIGNvbnN0IGFuaW1hdGlvbnMgPSAoKSA9PiB7XG4gICAgY29uc3QgYW5pbWF0aW9uSXNEZWZpbmVkID1cbiAgICAgIGltcG9ydHMuaW5kZXhPZihOb29wQW5pbWF0aW9uc01vZHVsZSkgPiAtMSB8fCBpbXBvcnRzLmluZGV4T2YoQnJvd3NlckFuaW1hdGlvbnNNb2R1bGUpID4gLTE7XG4gICAgcmV0dXJuIGFuaW1hdGlvbklzRGVmaW5lZCA/IFtdIDogW05vb3BBbmltYXRpb25zTW9kdWxlXTtcbiAgfTtcblxuICBjb25zdCByb3V0aW5nID0gKCkgPT4gKHJvdXRlcyA/IFtSb3V0ZXJUZXN0aW5nTW9kdWxlLndpdGhSb3V0ZXMocm91dGVzKV0gOiBbXSk7XG5cbiAgcmV0dXJuIFsuLi5pbXBvcnRzLCAuLi5hbmltYXRpb25zKCksIC4uLnJvdXRpbmcoKV07XG59XG5cbi8qKlxuICogV3JhcCB3YWl0Rm9yIHRvIGludm9rZSB0aGUgQW5ndWxhciBjaGFuZ2UgZGV0ZWN0aW9uIGN5Y2xlIGJlZm9yZSBpbnZva2luZyB0aGUgY2FsbGJhY2tcbiAqL1xuYXN5bmMgZnVuY3Rpb24gd2FpdEZvcldyYXBwZXI8VD4oXG4gIGRldGVjdENoYW5nZXM6ICgpID0+IHZvaWQsXG4gIGNhbGxiYWNrOiAoKSA9PiBUIGV4dGVuZHMgUHJvbWlzZTxhbnk+ID8gbmV2ZXIgOiBULFxuICBvcHRpb25zPzogZHRsV2FpdEZvck9wdGlvbnMsXG4pOiBQcm9taXNlPFQ+IHtcbiAgbGV0IGluRmFrZUFzeW5jID0gdHJ1ZTtcbiAgdHJ5IHtcbiAgICB0aWNrKDApO1xuICB9IGNhdGNoIChlcnIpIHtcbiAgICBpbkZha2VBc3luYyA9IGZhbHNlO1xuICB9XG5cbiAgZGV0ZWN0Q2hhbmdlcygpO1xuXG4gIHJldHVybiBhd2FpdCBkdGxXYWl0Rm9yKCgpID0+IHtcbiAgICBzZXRUaW1lb3V0KCgpID0+IGRldGVjdENoYW5nZXMoKSwgMCk7XG4gICAgaWYgKGluRmFrZUFzeW5jKSB7XG4gICAgICB0aWNrKDApO1xuICAgIH1cbiAgICByZXR1cm4gY2FsbGJhY2soKTtcbiAgfSwgb3B0aW9ucyk7XG59XG5cbi8qKlxuICogV3JhcCB3YWl0Rm9yRWxlbWVudFRvQmVSZW1vdmVkV3JhcHBlciB0byBwb2tlIHRoZSBBbmd1bGFyIGNoYW5nZSBkZXRlY3Rpb24gY3ljbGUgYmVmb3JlIGludm9raW5nIHRoZSBjYWxsYmFja1xuICovXG5hc3luYyBmdW5jdGlvbiB3YWl0Rm9yRWxlbWVudFRvQmVSZW1vdmVkV3JhcHBlcjxUPihcbiAgZGV0ZWN0Q2hhbmdlczogKCkgPT4gdm9pZCxcbiAgY2FsbGJhY2s6ICgoKSA9PiBUKSB8IFQsXG4gIG9wdGlvbnM/OiBkdGxXYWl0Rm9yT3B0aW9ucyxcbik6IFByb21pc2U8dm9pZD4ge1xuICBsZXQgY2I7XG4gIGlmICh0eXBlb2YgY2FsbGJhY2sgIT09ICdmdW5jdGlvbicpIHtcbiAgICBjb25zdCBlbGVtZW50cyA9IChBcnJheS5pc0FycmF5KGNhbGxiYWNrKSA/IGNhbGxiYWNrIDogW2NhbGxiYWNrXSkgYXMgRWxlbWVudFtdO1xuICAgIGNvbnN0IGdldFJlbWFpbmluZ0VsZW1lbnRzID0gZWxlbWVudHMubWFwKChlbGVtZW50KSA9PiB7XG4gICAgICBsZXQgcGFyZW50ID0gZWxlbWVudC5wYXJlbnRFbGVtZW50O1xuICAgICAgd2hpbGUgKHBhcmVudC5wYXJlbnRFbGVtZW50KSB7XG4gICAgICAgIHBhcmVudCA9IHBhcmVudC5wYXJlbnRFbGVtZW50O1xuICAgICAgfVxuICAgICAgcmV0dXJuICgpID0+IChwYXJlbnQuY29udGFpbnMoZWxlbWVudCkgPyBlbGVtZW50IDogbnVsbCk7XG4gICAgfSk7XG4gICAgY2IgPSAoKSA9PiBnZXRSZW1haW5pbmdFbGVtZW50cy5tYXAoKGMpID0+IGMoKSkuZmlsdGVyKEJvb2xlYW4pO1xuICB9IGVsc2Uge1xuICAgIGNiID0gY2FsbGJhY2s7XG4gIH1cblxuICByZXR1cm4gYXdhaXQgZHRsV2FpdEZvckVsZW1lbnRUb0JlUmVtb3ZlZCgoKSA9PiB7XG4gICAgY29uc3QgcmVzdWx0ID0gY2IoKTtcbiAgICBkZXRlY3RDaGFuZ2VzKCk7XG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfSwgb3B0aW9ucyk7XG59XG5cbmZ1bmN0aW9uIGNsZWFudXAoKSB7XG4gIG1vdW50ZWRGaXh0dXJlcy5mb3JFYWNoKGNsZWFudXBBdEZpeHR1cmUpO1xufVxuXG5mdW5jdGlvbiBjbGVhbnVwQXRGaXh0dXJlKGZpeHR1cmUpIHtcbiAgZml4dHVyZS5kZXN0cm95KCk7XG5cbiAgaWYgKCFmaXh0dXJlLm5hdGl2ZUVsZW1lbnQuZ2V0QXR0cmlidXRlKCduZy12ZXJzaW9uJykgJiYgZml4dHVyZS5uYXRpdmVFbGVtZW50LnBhcmVudE5vZGUgPT09IGRvY3VtZW50LmJvZHkpIHtcbiAgICBkb2N1bWVudC5ib2R5LnJlbW92ZUNoaWxkKGZpeHR1cmUubmF0aXZlRWxlbWVudCk7XG4gIH1cbiAgbW91bnRlZEZpeHR1cmVzLmRlbGV0ZShmaXh0dXJlKTtcbn1cblxuLy8gaWYgd2UncmUgcnVubmluZyBpbiBhIHRlc3QgcnVubmVyIHRoYXQgc3VwcG9ydHMgYWZ0ZXJFYWNoXG4vLyB0aGVuIHdlJ2xsIGF1dG9tYXRpY2FsbHkgcnVuIGNsZWFudXAgYWZ0ZXJFYWNoIHRlc3Rcbi8vIHRoaXMgZW5zdXJlcyB0aGF0IHRlc3RzIHJ1biBpbiBpc29sYXRpb24gZnJvbSBlYWNoIG90aGVyXG4vLyBpZiB5b3UgZG9uJ3QgbGlrZSB0aGlzLCBzZXQgdGhlIEFUTF9TS0lQX0FVVE9fQ0xFQU5VUCBlbnYgdmFyaWFibGUgdG8gJ3RydWUnXG5pZiAodHlwZW9mIHByb2Nlc3MgPT09ICd1bmRlZmluZWQnIHx8ICFwcm9jZXNzLmVudj8uQVRMX1NLSVBfQVVUT19DTEVBTlVQKSB7XG4gIGlmICh0eXBlb2YgYWZ0ZXJFYWNoID09PSAnZnVuY3Rpb24nKSB7XG4gICAgYWZ0ZXJFYWNoKCgpID0+IHtcbiAgICAgIGNsZWFudXAoKTtcbiAgICB9KTtcbiAgfVxufVxuXG5AQ29tcG9uZW50KHsgc2VsZWN0b3I6ICdhdGwtd3JhcHBlci1jb21wb25lbnQnLCB0ZW1wbGF0ZTogJycgfSlcbmNsYXNzIFdyYXBwZXJDb21wb25lbnQge31cblxuLyoqXG4gKiBXcmFwIGZpbmRCeSBxdWVyaWVzIHRvIHBva2UgdGhlIEFuZ3VsYXIgY2hhbmdlIGRldGVjdGlvbiBjeWNsZVxuICovXG5mdW5jdGlvbiByZXBsYWNlRmluZFdpdGhGaW5kQW5kRGV0ZWN0Q2hhbmdlczxUPihvcmlnaW5hbFF1ZXJpZXNGb3JDb250YWluZXI6IFQpOiBUIHtcbiAgcmV0dXJuIE9iamVjdC5rZXlzKG9yaWdpbmFsUXVlcmllc0ZvckNvbnRhaW5lcikucmVkdWNlKChuZXdRdWVyaWVzLCBrZXkpID0+IHtcbiAgICBjb25zdCBnZXRCeVF1ZXJ5ID0gb3JpZ2luYWxRdWVyaWVzRm9yQ29udGFpbmVyW2tleS5yZXBsYWNlKCdmaW5kJywgJ2dldCcpXTtcbiAgICBpZiAoa2V5LnN0YXJ0c1dpdGgoJ2ZpbmQnKSAmJiBnZXRCeVF1ZXJ5KSB7XG4gICAgICBuZXdRdWVyaWVzW2tleV0gPSBhc3luYyAodGV4dCwgb3B0aW9ucywgd2FpdE9wdGlvbnMpID0+IHtcbiAgICAgICAgLy8gb3JpZ2luYWwgaW1wbGVtZW50YXRpb24gYXQgaHR0cHM6Ly9naXRodWIuY29tL3Rlc3RpbmctbGlicmFyeS9kb20tdGVzdGluZy1saWJyYXJ5L2Jsb2IvbWFpbi9zcmMvcXVlcnktaGVscGVycy5qc1xuICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCB3YWl0Rm9yV3JhcHBlcihcbiAgICAgICAgICBkZXRlY3RDaGFuZ2VzRm9yTW91bnRlZEZpeHR1cmVzLFxuICAgICAgICAgICgpID0+IGdldEJ5UXVlcnkodGV4dCwgb3B0aW9ucyksXG4gICAgICAgICAgd2FpdE9wdGlvbnMsXG4gICAgICAgICk7XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICB9O1xuICAgIH0gZWxzZSB7XG4gICAgICBuZXdRdWVyaWVzW2tleV0gPSBvcmlnaW5hbFF1ZXJpZXNGb3JDb250YWluZXJba2V5XTtcbiAgICB9XG5cbiAgICByZXR1cm4gbmV3UXVlcmllcztcbiAgfSwge30gYXMgVCk7XG59XG5cbi8qKlxuICogQ2FsbCBkZXRlY3RDaGFuZ2VzIGZvciBhbGwgZml4dHVyZXNcbiAqL1xuZnVuY3Rpb24gZGV0ZWN0Q2hhbmdlc0Zvck1vdW50ZWRGaXh0dXJlcygpIHtcbiAgbW91bnRlZEZpeHR1cmVzLmZvckVhY2goKGZpeHR1cmUpID0+IHtcbiAgICB0cnkge1xuICAgICAgZml4dHVyZS5kZXRlY3RDaGFuZ2VzKCk7XG4gICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICBpZiAoIWVyci5tZXNzYWdlLnN0YXJ0c1dpdGgoJ1ZpZXdEZXN0cm95ZWRFcnJvcicpKSB7XG4gICAgICAgIHRocm93IGVycjtcbiAgICAgIH1cbiAgICB9XG4gIH0pO1xufVxuXG4vKipcbiAqIFJlLWV4cG9ydCBzY3JlZW4gd2l0aCBwYXRjaGVkIHF1ZXJpZXNcbiAqL1xuY29uc3Qgc2NyZWVuID0gcmVwbGFjZUZpbmRXaXRoRmluZEFuZERldGVjdENoYW5nZXMoZHRsU2NyZWVuKTtcblxuLyoqXG4gKiBSZS1leHBvcnQgd2l0aGluIHdpdGggcGF0Y2hlZCBxdWVyaWVzXG4gKi9cblxuY29uc3Qgd2l0aGluOiB0eXBlb2YgZ2V0UXVlcmllc0ZvckVsZW1lbnQgPSA8VCBleHRlbmRzIFF1ZXJpZXMgPSB0eXBlb2YgZHRsUXVlcmllcz4oXG4gIGVsZW1lbnQ6IEhUTUxFbGVtZW50LFxuICBxdWVyaWVzVG9CaW5kPzogVCxcbikgPT4ge1xuICBjb25zdCBjb250YWluZXIgPSBkdGxXaXRoaW4oZWxlbWVudCwgcXVlcmllc1RvQmluZCk7XG4gIHJldHVybiByZXBsYWNlRmluZFdpdGhGaW5kQW5kRGV0ZWN0Q2hhbmdlcyhjb250YWluZXIpO1xufTtcblxuLyoqXG4gKiBSZS1leHBvcnQgd2FpdEZvciB3aXRoIHBhdGNoZWQgd2FpdEZvclxuICovXG5hc3luYyBmdW5jdGlvbiB3YWl0Rm9yPFQ+KGNhbGxiYWNrOiAoKSA9PiBUIGV4dGVuZHMgUHJvbWlzZTxhbnk+ID8gbmV2ZXIgOiBULCBvcHRpb25zPzogZHRsV2FpdEZvck9wdGlvbnMpOiBQcm9taXNlPFQ+IHtcbiAgcmV0dXJuIHdhaXRGb3JXcmFwcGVyKGRldGVjdENoYW5nZXNGb3JNb3VudGVkRml4dHVyZXMsIGNhbGxiYWNrLCBvcHRpb25zKTtcbn1cblxuLyoqXG4gKiBSZS1leHBvcnQgd2FpdEZvckVsZW1lbnRUb0JlUmVtb3ZlZCB3aXRoIHBhdGNoZWQgd2FpdEZvckVsZW1lbnRUb0JlUmVtb3ZlZFxuICovXG5hc3luYyBmdW5jdGlvbiB3YWl0Rm9yRWxlbWVudFRvQmVSZW1vdmVkPFQ+KGNhbGxiYWNrOiAoKCkgPT4gVCkgfCBULCBvcHRpb25zPzogZHRsV2FpdEZvck9wdGlvbnMpOiBQcm9taXNlPHZvaWQ+IHtcbiAgcmV0dXJuIHdhaXRGb3JFbGVtZW50VG9CZVJlbW92ZWRXcmFwcGVyKGRldGVjdENoYW5nZXNGb3JNb3VudGVkRml4dHVyZXMsIGNhbGxiYWNrLCBvcHRpb25zKTtcbn1cblxuLyoqXG4gKiBNYW51YWxseSBleHBvcnQgb3RoZXJ3aXNlIHdlIGdldCB0aGUgZm9sbG93aW5nIGVycm9yIHdoaWxlIHJ1bm5pbmcgSmVzdCB0ZXN0c1xuICogVHlwZUVycm9yOiBDYW5ub3Qgc2V0IHByb3BlcnR5IGZpcmVFdmVudCBvZiBbb2JqZWN0IE9iamVjdF0gd2hpY2ggaGFzIG9ubHkgYSBnZXR0ZXJcbiAqIGV4cG9ydHMuZmlyZUV2ZW50ID0gZmlyZUV2ZW50XG4gKi9cbmV4cG9ydCB7XG4gIGZpcmVFdmVudCxcbiAgYnVpbGRRdWVyaWVzLFxuICBnZXRCeUxhYmVsVGV4dCxcbiAgZ2V0QWxsQnlMYWJlbFRleHQsXG4gIHF1ZXJ5QnlMYWJlbFRleHQsXG4gIHF1ZXJ5QWxsQnlMYWJlbFRleHQsXG4gIGZpbmRCeUxhYmVsVGV4dCxcbiAgZmluZEFsbEJ5TGFiZWxUZXh0LFxuICBnZXRCeVBsYWNlaG9sZGVyVGV4dCxcbiAgZ2V0QWxsQnlQbGFjZWhvbGRlclRleHQsXG4gIHF1ZXJ5QnlQbGFjZWhvbGRlclRleHQsXG4gIHF1ZXJ5QWxsQnlQbGFjZWhvbGRlclRleHQsXG4gIGZpbmRCeVBsYWNlaG9sZGVyVGV4dCxcbiAgZmluZEFsbEJ5UGxhY2Vob2xkZXJUZXh0LFxuICBnZXRCeVRleHQsXG4gIGdldEFsbEJ5VGV4dCxcbiAgcXVlcnlCeVRleHQsXG4gIHF1ZXJ5QWxsQnlUZXh0LFxuICBmaW5kQnlUZXh0LFxuICBmaW5kQWxsQnlUZXh0LFxuICBnZXRCeUFsdFRleHQsXG4gIGdldEFsbEJ5QWx0VGV4dCxcbiAgcXVlcnlCeUFsdFRleHQsXG4gIHF1ZXJ5QWxsQnlBbHRUZXh0LFxuICBmaW5kQnlBbHRUZXh0LFxuICBmaW5kQWxsQnlBbHRUZXh0LFxuICBnZXRCeVRpdGxlLFxuICBnZXRBbGxCeVRpdGxlLFxuICBxdWVyeUJ5VGl0bGUsXG4gIHF1ZXJ5QWxsQnlUaXRsZSxcbiAgZmluZEJ5VGl0bGUsXG4gIGZpbmRBbGxCeVRpdGxlLFxuICBnZXRCeURpc3BsYXlWYWx1ZSxcbiAgZ2V0QWxsQnlEaXNwbGF5VmFsdWUsXG4gIHF1ZXJ5QnlEaXNwbGF5VmFsdWUsXG4gIHF1ZXJ5QWxsQnlEaXNwbGF5VmFsdWUsXG4gIGZpbmRCeURpc3BsYXlWYWx1ZSxcbiAgZmluZEFsbEJ5RGlzcGxheVZhbHVlLFxuICBnZXRCeVJvbGUsXG4gIGdldEFsbEJ5Um9sZSxcbiAgcXVlcnlCeVJvbGUsXG4gIHF1ZXJ5QWxsQnlSb2xlLFxuICBmaW5kQnlSb2xlLFxuICBmaW5kQWxsQnlSb2xlLFxuICBnZXRCeVRlc3RJZCxcbiAgZ2V0QWxsQnlUZXN0SWQsXG4gIHF1ZXJ5QnlUZXN0SWQsXG4gIHF1ZXJ5QWxsQnlUZXN0SWQsXG4gIGZpbmRCeVRlc3RJZCxcbiAgZmluZEFsbEJ5VGVzdElkLFxuICBjcmVhdGVFdmVudCxcbiAgZ2V0RGVmYXVsdE5vcm1hbGl6ZXIsXG4gIGdldEVsZW1lbnRFcnJvcixcbiAgZ2V0Tm9kZVRleHQsXG4gIGdldFF1ZXJpZXNGb3JFbGVtZW50LFxuICBnZXRSb2xlcyxcbiAgaXNJbmFjY2Vzc2libGUsXG4gIGxvZ0RPTSxcbiAgbG9nUm9sZXMsXG4gIHByZXR0eURPTSxcbiAgcXVlcmllcyxcbiAgcXVlcnlBbGxCeUF0dHJpYnV0ZSxcbiAgcXVlcnlCeUF0dHJpYnV0ZSxcbiAgcXVlcnlIZWxwZXJzLFxufSBmcm9tICdAdGVzdGluZy1saWJyYXJ5L2RvbSc7XG5cbi8vIGV4cG9ydCBwYXRjaGVkIGR0bFxuZXhwb3J0IHsgc2NyZWVuLCB3YWl0Rm9yLCB3YWl0Rm9yRWxlbWVudFRvQmVSZW1vdmVkLCB3aXRoaW4gfTtcbiJdfQ==